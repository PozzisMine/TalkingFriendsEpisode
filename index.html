<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Каталог сериалов — Эпизоды</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Каталог сериалов</h1>
      <p class="lead">Выбери сериал и смотри эпизоды прямо в браузере.</p>
      <input id="search" type="search" placeholder="Поиск сериалов..." />
    </header>

    <main id="shows-grid" class="grid"></main>

    <footer>
      <p>Редактируй <code>data/shows.json</code> чтобы добавить свои сериалы и эпизоды.</p>
    </footer>
  </div>

<script>
fetch('data/shows.json')
  .then(r => r.json())
  .then(shows => {
    const grid = document.getElementById('shows-grid');
    const search = document.getElementById('search');

    function render(list) {
      grid.innerHTML = list.map(s => `
        <a class="card" href="show.html?id=${s.id}">
          <img class="poster" src="${s.poster_url}" alt="${s.name} poster">
          <div class="meta">
            <h2>${s.name}</h2>
            <p class="desc">${s.description}</p>
          </div>
        </a>
      `).join('');
      if (!list.length) grid.innerHTML = '<p class="empty">Ничего не найдено</p>';
    }

    render(shows);

    search.addEventListener('input', () => {
      const q = search.value.trim().toLowerCase();
      if (!q) return render(shows);
      const filtered = shows.filter(s => (s.name + ' ' + s.description).toLowerCase().includes(q));
      render(filtered);
    });
  });
</script>
</body>
</html>
